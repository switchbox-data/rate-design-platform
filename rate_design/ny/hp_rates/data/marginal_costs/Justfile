# Resolve project root as absolute path from this Justfile's location (works for any clone)
project_root := absolute_path(justfile_directory() / ".." / ".." / ".." / ".." / "..")

create-td-mc-data:
  just create-td-mc-data-nyseg
  just create-td-mc-data-rge
  just create-td-mc-data-cenhud
  just create-td-mc-data-nimo

create-td-mc-data-nyseg:
  cd {{project_root}} && uv run python {{project_root}}/utils/fetch_eia_zone_loads.py \
    --state NY \
    --start-month 2025-01 \
    --end-month 2025-12
  cd {{project_root}} && uv run python {{project_root}}/utils/aggregate_eia_utility_loads.py \
    --state NY \
    --year 2025 \
    --utility nyseg \
    --upload
  cd {{project_root}} && uv run python {{project_root}}/utils/generate_utility_tx_dx_mc.py \
    --state NY \
    --utility nyseg \
    --mc-year 2026 \
    --load-year 2025 \
    --mc-table-path {{project_root}}/rate_design/ny/hp_rates/data/marginal_costs/ny_marginal_costs_2026_2035.csv \
    --upload

create-td-mc-data-rge:
  cd {{project_root}} && uv run python {{project_root}}/utils/fetch_eia_zone_loads.py \
    --state NY \
    --start-month 2025-01 \
    --end-month 2025-12
  cd {{project_root}} && uv run python {{project_root}}/utils/aggregate_eia_utility_loads.py \
    --state NY \
    --year 2025 \
    --utility rge \
    --upload
  cd {{project_root}} && uv run python {{project_root}}/utils/generate_utility_tx_dx_mc.py \
    --state NY \
    --utility rge \
    --mc-year 2026 \
    --load-year 2025 \
    --mc-table-path {{project_root}}/rate_design/ny/hp_rates/data/marginal_costs/ny_marginal_costs_2026_2035.csv \
    --upload

create-td-mc-data-cenhud:
  cd {{project_root}} && uv run python {{project_root}}/utils/fetch_eia_zone_loads.py \
    --state NY \
    --start-month 2025-01 \
    --end-month 2025-12
  cd {{project_root}} && uv run python {{project_root}}/utils/aggregate_eia_utility_loads.py \
    --state NY \
    --year 2025 \
    --utility cenhud \
    --upload
  cd {{project_root}} && uv run python {{project_root}}/utils/generate_utility_tx_dx_mc.py \
    --state NY \
    --utility cenhud \
    --mc-year 2026 \
    --load-year 2025 \
    --mc-table-path {{project_root}}/rate_design/ny/hp_rates/data/marginal_costs/ny_marginal_costs_2026_2035.csv \
    --upload
