# NY heat pump tasks (placeholder).

# Resolve project root as absolute path using git
project_root := `git rev-parse --show-toplevel`

identify-hp-customers release upgrade_ids input_filename output_filename:
  uv run python {{project_root}}/utils/identify_hp_customers.py \
    --data_path "s3://data.sb/nrel/resstock/{{release}}/metadata/state=NY/" \
    --output_path "s3://data.sb/nrel/resstock/{{release}}/metadata/state=NY/" \
    --input_filename "{{input_filename}}" \
    --output_filename "{{output_filename}}" \
    --upgrade_ids "{{upgrade_ids}}"

identify-heating-type release upgrade_ids input_filename output_filename:
  uv run python {{project_root}}/utils/identify_heating_type.py \
    --data_path "s3://data.sb/nrel/resstock/{{release}}/metadata/state=NY/" \
    --output_path "s3://data.sb/nrel/resstock/{{release}}/metadata/state=NY/" \
    --input_filename "{{input_filename}}" \
    --output_filename "{{output_filename}}" \
    --upgrade_id "{{upgrade_ids}}"

identify-hp-customers-all-upgrades-amy2018-2-ny:
  just identify-hp-customers "res_2024_amy2018_2" "00 01 02 03 04 05" "metadata.parquet" "metadata-sb.parquet"


identify-heating-type-all-upgrades-amy2018-2-ny:
  just identify-heating-type "res_2024_amy2018_2" "00 01 02 03 04 05" "metadata.parquet" "metadata-sb.parquet"

identify-hp-customers-and-heating-type-all-upgrades-amy2018-2-ny:
  just identify-hp-customers "res_2024_amy2018_2" "00 01 02 03 04 05" "metadata.parquet" "metadata-sb.parquet"
  just identify-heating-type "res_2024_amy2018_2" "00 01 02 03 04 05" "metadata-sb.parquet" "metadata-sb.parquet"
